<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/cadastro.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;500;700&family=Overpass:ital,wght@1,100&family=Poppins:wght@400;500;700&family=Prosto+One&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <main>
      <div class="contaainer">
        <div class="top-image">
          <a href="./cadastro.html">
            <button>
              <img src="./img/Voltar.svg" alt="" />
            </button>
            <button>
              <p>3/3</p>
            </button>
          </a>
        </div>
        <div class="register-box">
          <h1>Cadastro</h1>
          <p>Preencha os dados abaixo para começar.</p>
          <form action="./concluido.html">
            <div class="left">
              <input
                type="number"
                name="cep"
                id="cep"
                placeholder="CEP (apenas números)"
              />
              <input
                type="text"
                id="estado"
                name="estado"

                placeholder="Estado"
              />
              <input
                type="number"
                id="numero"
                name="numero"
                
                placeholder="Número"
              />
              <input
                type="text"
                id="cidade"
                name="cidade"
               
                placeholder="Cidade"
              />
              <input
                type="text"
                id="rua"
                name="rua"
                
                placeholder="Rua"
              />
            </div>
            <button type="submit">Continuar</button>
          </form>
        </div>
      </div>
    </main>
    <script>
      document.getElementById("cep").addEventListener("blur", function () {
        let cep = this.value.replace(/\D/g, "");
        if (cep.length === 8) {
          let url = `https://viacep.com.br/ws/${cep}/json/`;
          fetch(url)
            .then((response) => response.json())
            .then((data) => {
              if (!data.erro) {
                document.getElementById("rua").value = data.logradouro;
                document.getElementById("cidade").value = data.localidade;
                document.getElementById("estado").value = data.uf;
              }
              // else {
              //   alert("CEP não encontrado. Verifique o CEP digitado.");
              // }
            })
            .catch((error) => {
              alert(
                "Ocorreu um erro ao buscar o CEP. Tente novamente mais tarde."
              );
            });
        }
      });
    </script>
  </body>
</html>
